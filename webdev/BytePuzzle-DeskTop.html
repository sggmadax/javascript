<!DOCTYPE html>
<HTML lang='utf-8'>
	<HEAD>
		<TITLE>xg1</TITLE>
		<meta charset="utf-8">
	<!--	<link rel="stylesheet" href="css/mycss.css"> -->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script type="text/javascript" src="js/bytePuzzle.js"></script>
	
		
	</HEAD>

	<BODY>
		<h2>BytePuzzle</h2>
		<DIV class="catagory" id="packages"><h2>closure</h2></DIV>

			
		<DIV>
		
		</DIV>			
			
			
			<DIV id="button1">click  to generate byte puzzle : <a href="javascript:call_f1()">click!</a> 
				<span id="counter1">0</span></DIV>
				
				
			<DIV id="button2">closure function 2 : <a href="javascript:call_f2()">click!</a> 
				<span id="counter2">0</span></DIV>
			<hr>
		<DIV>
			如果不用 closure， 而直接 參照 bytePuzzle的 一個方法， 其效果相當于 呼叫一個 static 方法
			<br> 不管有多少對象來呼叫這個方法， 大家共享 runtime scope； 
			<br> 因此 counter 衹有一個版本。
		</DIV>					
			<DIV id="button3">Non-closure function 3 : <a href="javascript:call_f3()"> click! </a>
			<span id="counter3"> 0 </span></DIV>
			
			</DIV>
			<DIV id="button4">Non-closure function 4 : <a href="javascript:call_f4()"> click! </a> 
			<span id="counter4"> 0 </span></DIV>
			</DIV>
			
			</DIV>
			<DIV id="button5">direct function call 5 : <a href="javascript:call_f5()"> click! </a> 
			<span id="counter5"> 0 </span></DIV>
			</DIV>
			
			
		<script type="text/javascript">
			var f1 , f2, f3,f4;
			$(document).ready(function(){
			 f1 = bytePuzzle.generatePuzzle();
			 
			 //f2 = bytePuzzle.getCounterFunction();
			 //f3 = bytePuzzle.addOne1();
			 //f4 = bytePuzzle.addOne1();			
			}); 
					
			function call_f1() {
				console.log("f1");
				bytePuzzle.generatePuzzle();
				
				$("#counter1").text(bytePuzzle.toZi());
			}
			function call_f2() {
				console.log("f2");
				$("#counter2").text(f2());
			}			
			
			function call_f3() {
			//	console.log("f3-addOne0");
			//	
			var ans = generatePuzzle();
			var scores = bytePuzzle.compareBytes (ans);
			$("#counter3").text( ans + ":" + scores.A + "a" + scores.B + "b");
			
			}	
			function call_f4() {
				console.log("f4-addOne0");
				$("#counter4").text(f4());
			}	
			b
			function call_f5() {
				var x = bytePuzzle.getCounter();
				console.log("f5:" + x);
				$("#counter5").text(x);
			}
			
	 function generatePuzzle(){	
		var isDup = false;
		var i = 0;		
		var no = bytePuzzle.noBytes;
		puzzleBuffer = new ArrayBuffer(no);
		var puzzleView = new Uint8Array(puzzleBuffer);
			
		while (i < no)
		{
			isDup = false;
			puzzleView[i] = Math.round(Math.random()*10) ;
			
			// check the number 
			for (var m = 0; m < i; m++)
			{
				if (puzzleView[i] == puzzleView[m])
				{
					isDup = true;
					break;
				}
			}

			if (!isDup)
			{
				i++;
			}
		}
		return puzzleView ;
    }
		</script>
	</BODY>
	
</HTML>
